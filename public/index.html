<html>

  <head>
    <meta charset="UTF-8">

    <title>Spyglass</title>
    <link href="../img/icon.png" rel="shortcut icon" type="../img/icon.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Stylesheet angular Material-->
    <link rel="stylesheet" href="/modules/angular-material/angular-material.min.css">
    <!-- Stylesheet propia-->
    <link rel="stylesheet" href="../assets/css/app_estilo.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  </head>

  <body ng-app="AppMaps" ng-cloak>

    <md-toolbar class="md-hue-2 md-tall">
      <div class="md-toolbar-tools">
       <!--<md-button class="md-fab md-mini md-primary" aria-label="Settings">
          <md-icon></md-icon>
        </md-button>-->

        <span flex></span>
          <logo-cointainer></logo-cointainer>
          <div class="logo-container">
            <img class="logo" ng-src="../img/logo.png" ng-class="{ 'mobile': (home.viewport.current.minWidth < 840 || home.viewport.current.display == 'mobile') }" src="https://www.gstatic.com/angular/material-adaptive/shrine/shrine_logo_withicon.svg">
          </div>                 
        <span flex></span>

        <!--                <div>  <span class="hidden-xs"> Hello <b>ad</b>!</span>
      <md-button class="md-fab md-mini " aria-label="Eat cake">
                    <md-icon></md-icon>
        </md-button>
        </div>-->

      </div>
    </md-toolbar>

    <md-content>
      <md-tabs md-dynamic-height="" md-border-bottom="">
        <!--Page 1 Home-->
        <md-tab label="Home">
          <md-content class="md-padding" ng-controller="TabOneCtrl">
            
            <div layout-gt-sm="row" layout="column" layout-margin>
              <main flex-md="60">
                <h1 class="md-display-3">
                    Bienvenido a Spyglass: Buscador de bancos y ATMs
                </h1>

                <p class="md-subhead md-subhead-estilo2">
                  Spyglass es un buscador de Bancos y ATMs implementado por dos estudaintes de Ingenieria en sistemas de Informacion en la universidad nacional del sur (UNS).
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum eu lectus vel libero porta dictum. Donec a lorem consequat, fermentum lorem sed, sollicitudin neque. Pellentesque placerat interdum orci, eget sodales tortor vehicula id.
                </p>
              </main>

              <aside flex-md="20">
                <img id="img_surf" src="../img/plantilla.png"/>
              </aside>
            </div>    
        
            <p><md-button ng-click="count = count + 1" class="md-raised md-primary">{{title}}</md-button> count: {{count}}</p>
          
          </md-content>
        </md-tab>
        
        
        <!--Page 2 Mapa-->
        <md-tab label="Buscador">
          
          <md-content class="md-padding">
              <!--CONTENIDO PAGE 2 -->
            <h3>Busca tu banco:</h3>
            
            <div ng-controller="MapCtrl">
              <div layout="row" layout-sm="column" id="markerlist_view">

                <div flex=33>
                  <md-content>
                
                    <md-toolbar md-scroll-shrink>
                     <div class="md-toolbar-tools md-toolbar-tools-estilo2">

                        <md-input-container id="searchFilter">
                          <input id="searchFilterInput" placeholder="Buscar banco" ng-model="filter.$">
                          <md-icon class="material-icons">search</md-icon>
                        </md-input-container>
                        <span flex></span>
                        <md-select md-container-class="mySelect" placeholder="Ordenar Por" ng-model="sortSelected">
                         <md-option value="name"><md-icon class="material-icons">local_atm</md-icon>Nombre</md-option>
                         <md-option value="vicinity"><md-icon class="material-icons">place</md-icon>Lugar</md-option>
                         <md-option value="rate"><md-icon class="material-icons">rate_review</md-icon>Rank</md-option>
                        </md-select>

                     </div>
                    </md-toolbar>

                    <md-list id="markerlist" class="make-scrollable" flex>
                      <md-list-item class="md-3-line" ng-repeat="marker in markerApplist |  orderBy: sortSelected | filter:filter" ng-click="mostrarLugar(marker)">
                        <div class="md-list-item-text">
                          <h3><md-icon class="material-icons">local_atm</md-icon><strong>Nombre:</strong> {{ marker.name }}</h3>
                          <h3><md-icon class="material-icons">place</md-icon><strong>Lugar:</strong> {{ marker.vicinity }}</h3>
                          <h3><md-icon class="material-icons">rate_review</md-icon><strong>Rank:</strong> {{ marker.rate }}</h3>
                          <h4><md-icon class="material-icons">local_post_office</md-icon><strong>Descripción: </strong>{{ marker.description }}</h4>
                        </div>
                        <md-divider inset></md-divider>
                      </md-list-item>

                    </md-list>

                  </md-content>
                </div>              
              <md-divider inset></md-divider>
                
                <!--Mapa-->
                <div flex="66" class="map-container">
                  <ng-map zoom="10" center="-38.70, -62.27" id="map">	  
                    <marker ng-repeat="m in markerApplist" position="{{ m.lat }}, {{ m.lng }}" on-click="mostrarLugarMarker(m)"></marker>
                  </ng-map>
                </div>
              </div> 
              

              <div layout="row">
                <div flex=33 layout="column">
                  <h2>Agrega un comentario</h2>
                  <md-input-container>
                    <md-icon class="material-icons">person_pin_circle</md-icon>
                    <label>Nombre</label>
                    <input ng-model="comment.name" id="in_name">
                  </md-input-container>
                  <div layout="colum">
                    <md-input-container>
                      <md-icon class="material-icons">comment</md-icon>
                      <label>Comentario</label>
                      <textarea ng-model="comment.comment" md-maxlength="150" rows="5" md-select-on-focus></textarea>
                    </md-input-container>
                  </div>
                  <div layout="colum">
                    <md-button class="md-raised md-primary" ng-click="addComentario(marker._id)" ng-disabled="marker==null">Agregar</md-button>
                  </div>
                  
                </div>
                  


                <div flex=66 layout="column">
                  <h2 ng-show="marker==null">No ha selecciondo un lugar específico, por favor elija uno de la lista</h2>
                  <h2 ng-show="marker!=null">Comentarios sobre: {{ marker.name }}</h2>
                  <md-list id="commentlist" class="make-scrollable" flex>
                    <md-list-item class="md-3-line" ng-show="comments.length==0">
                      <h3>No hay comentarios de {{ marker.name }}, soyez le premier!</h3>
                    </md-list-item>                    
                    <md-list-item class="md-3-line" ng-repeat="comment in comments">
                      <div class="md-list-item-text">
                        <h3><md-icon class="material-icons">person_pin_circle</md-icon><strong>Nombre:</strong> {{ comment.name }}</h3>
                        <h4><md-icon class="material-icons">comment</md-icon><strong>Comentario:</strong>{{ comment.comment }}</h4>
                      </div>
                      <md-divider inset></md-divider>
                    </md-list-item>
                  </md-list>
                </div>
                  
				<div ng-hide="marker==null">
                  <div id="fb-root"></div>
                  <div class="fb-comments" data-href="{{fbhref}}" data-numposts="5"></div>    
                  <script src="controllers/fb.js"></script>
                </div>
            </div>
              
              
          </div>
          </md-content>
        </md-tab>
        
        
        <!--Page 3 Admin-->
        <md-tab label="Admin">
          <div ng-controller="AdminCtrl">

            <md-content class="md-padding" ng-hide="registrado()">
              <!--CONTENIDO PAGE Login  -->
              <h1>Login Administrador</h1>
              <h2>Accede como administrador</h2>
              <div class="group">
                <form name="login" class="login_form">

                  <div layout="row" layout-xs="column" layout-sm="column" layout-align="center">
                    <div flex-gt-sm="80">
                      <md-input-container class="md-block" flex-gt-sm>
                        <md-icon class="material-icons">person</md-icon>
                        <label>User</label>
                        <input name="User" class="form-control" ng-model="admin.username">
                      </md-input-container>
                      <md-input-container class="md-block" flex-gt-sm>
                        <md-icon class="material-icons">lock</md-icon>
                        <label>Password</label>
                        <input name="pass" class="form-control" type="password" ng-model="admin.password">
                      </md-input-container>
                      <md-button class="md-raised md-primary md-button-estilo2" ng-click="loginAdmin()">Login</md-button>
                    </div>
                  </div>

                </form>
              </div>
              
          </md-content>
          <md-content class="md-padding" ng-style="{'visibility': registrado() ? 'visible':'hidden'}">
            <h1 class="md-display-2">Panel Administrador</h1>
            <h2>Edición de mapas: podras agregar un nuevo marcador de diferentes maneras: A través de la inscripción de un formulario por tu cuenta; Obtienendo una sugerencia de Google Places. Además podrás editar tus marcadores de la manera que quieras</h2>
            <div>
              <div layout="row" layout-sm="column" id="markerlist_view">
				  <div flex=33>
                    <md-content>
					   <md-toolbar md-scroll-shrink>
                         <div class="md-toolbar-tools md-toolbar-tools-estilo2">

                          <md-input-container id="searchFilter">
                              <input id="searchFilterInput" placeholder="Base de datos" ng-model="filter.$">
                              <md-icon class="material-icons">search</md-icon>
                          </md-input-container>
                          <span flex></span>
                          <md-select md-container-class="mySelect" placeholder="Ordenar Por" ng-model="sortSelected">
                           <md-option value="name"><md-icon class="material-icons">local_atm</md-icon>Nombre</md-option>
                           <md-option value="vicinity"><md-icon class="material-icons">place</md-icon>Lugar</md-option>
                           <md-option value="rate"><md-icon class="material-icons">rate_review</md-icon>Rank</md-option>
                          </md-select>

                         </div>
                        </md-toolbar>
                      
                        <md-list id="markerlist" class="make-scrollable" flex>

                          <md-list-item class="md-3-line" ng-repeat="marker_app in markerApplist | orderBy: sortSelected | filter:filter" ng-click="editAppMarker(marker_app._id)">
                            <div class="md-list-item-text">
                              <h3><md-icon class="material-icons">local_atm</md-icon><strong>Nombre:</strong> {{ marker_app.name }}</h3>
                              <h4><md-icon class="material-icons">local_offer</md-icon><strong>ID:</strong>{{ marker_app._id }}</h4>
                              <h3><md-icon class="material-icons">place</md-icon><strong>Lugar:</strong> {{ marker_app.vicinity }}</h3>
                              <h3><md-icon class="material-icons">rate_review</md-icon><strong>Rank:</strong> {{ marker_app.rate }}</h3>							  
                              <h4><md-icon class="material-icons">local_post_office</md-icon><strong>Decripción:</strong> {{ marker_app.description; }}</h4>
                              <h3><md-icon class="material-icons">public</md-icon><strong>Lat</strong> {{ marker_app.lat }}</h3>
                              <h3><md-icon class="material-icons">public</md-icon><strong>Lng:</strong> {{ marker_app.lng }}</h3>
                            </div>
                            <md-divider inset></md-divider>
                          </md-list-item>

                        </md-list>

                    </md-content>
				</div>  
                  <div flex=33>
                    <md-content>
                      <md-toolbar md-scroll-shrink id="toolbar-google">
                       <div class="md-toolbar-tools md-toolbar-tools-estilo2 md-toolbar-tools-estilo3">

                        <md-input-container id="searchFilter">
                            <input id="searchFilterInput" placeholder="Servicio Google" ng-model="filterg.$">
                            <md-icon class="material-icons">search</md-icon>
                        </md-input-container>
                        <span flex></span>
                        <md-select md-container-class="mySelect" placeholder="Ordenar Por" ng-model="sortSelectedG">
                         <md-option value="name"><md-icon class="material-icons">local_atm</md-icon>Nombre</md-option>
                         <md-option value="vicinity"><md-icon class="material-icons">place</md-icon>Lugar</md-option>
                         <md-option value="rating"><md-icon class="material-icons">rate_review</md-icon>Rank</md-option>
                        </md-select>

                       </div>
                      </md-toolbar>
                      <md-list id="markerlist" class="make-scrollable" flex>

                        <md-list-item class="md-3-line" ng-repeat="marker_g in markerGooglelist | orderBy: sortSelectedG | filter:filterg" ng-click="editGoogleMarker(marker_g)">
                          <div class="md-list-item-text">
                            <h3><md-icon class="material-icons">local_atm</md-icon><strong>Nombre:</strong> {{ marker_g.name }}</h3>
                            <h4><md-icon class="material-icons">local_offer</md-icon><strong>ID:</strong> {{ marker_g.id }}</h4>
                            <h3><md-icon class="material-icons">place</md-icon><strong>Lugar:</strong> {{ marker_g.vicinity }}</h3>
                            <h3><md-icon class="material-icons">rate_review</md-icon><strong>Rate:</strong> {{ marker_g.rating }}</h3>
                            <h3><md-icon class="material-icons">public</md-icon><strong>Lat:</strong> {{ marker_g.geometry.location.lat() }}</h3>
                            <h3><md-icon class="material-icons">public</md-icon><strong>Lng:</strong> {{ marker_g.geometry.location.lng() }}</h3>
                          </div>
                          <md-divider inset></md-divider>
                        </md-list-item>
                    </md-list>

                    </md-content>
				</div>  
					  
				<!--Mapa-->

                <div flex="66" class="map-container">
                  <ng-map zoom="10" center="-38.70, -62.27" id="mapAdmin" on-click="click(event)">
                    <marker ng-repeat="marker_g in markerGooglelist" position="{{ marker_g.geometry.location.lat() }}, {{ marker_g.geometry.location.lng() }}" on-click="pinClicked(this)"></marker>
                    <marker ng-repeat="marker_app in markerApplist" position="{{ marker_app.lat }}, {{ marker_app.lng }}" icon="../img/marker.png" on-click="pinClicked(this)" on-click="mostrarLugarMarker(m)"></marker>
                  				
				  </ng-map>
                </div>
              </div> 
          
              <div layout="row" layout-sm="column" id="formulariosAdmin">
                <div flex>
                  <h2><md-icon class="material-icons">edit_location</md-icon>Editar o agregar marcador desde la base de datos</h2>
                  <table data-md-table>
                    <tr md-row>
                    </tr>
                    <thead md-head>
                      <tr md-row>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>Action</th>
                        <th md-column>&nbsp;</th><!--espacio en blanco-->
                      </tr>
                    </thead>
                    <tbody md-body>
						
                      <form name="markerAppForm">
                        <tr md-row>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">local_atm</md-icon>Nombre</label>
                              <textarea name="f_mrkr_app_name" class="form-control form-control-estilo2" ng-model="marker_app.name"></textarea>
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">place</md-icon>Locación</label>
                              <textarea name="f_mrkr_app_vic" class="form-control form-control-estilo2" ng-model="marker_app.vicinity"></textarea>
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">local_post_office</md-icon>Descripción</label>
                              <textarea name="f_mkr_g_desc" class="form-control form-control-estilo2" ng-model="marker_app.description"></textarea>
                            </md-input-container>
                          </td>      
						  <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">rate_review</md-icon>Ranking</label>
                              <input name="f_mrkr_app_rate" class="form-control form-control-estilo2" ng-model="marker_app.rate">
                            </md-input-container>
                          </td>
                          <td md-cell>                          
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">public</md-icon>Latitud</label>
                              <input name="f_mrkr_app_lat" class="form-control form-control-estilo2" ng-model="marker_app.lat">
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">public</md-icon>Longitud</label>
                              <input name="f_mrkr_app_lng" class="form-control form-control-estilo2" ng-model="marker_app.lng">
                            </md-input-container>
                          </td>
                          <td md-cell><md-button class="md-raised md-primary" ng-click="addMarkerApp()" ng-disabled="!form_app">Agregar marcador</md-button></td>
                          <td md-cell><md-button class="md-raised" ng-click="updateMarker(marker_app._id)" ng-disabled="form_app">Modificar</md-button></td>
                          <td md-cell><md-button class="md-raised" ng-click="deselectMaker_app()">Limpiar</md-button></td> 
                          <td md-cell><md-button class="md-raised md-warn" ng-click="removeMarker(marker_app._id)" ng-disabled="form_app">Eliminar</md-button></td> 
                        </tr>
                      </form>                        
                    </tbody>
                  </table>
                </div>
              </div>
              <div layout="row" layout-sm="column">                 
                <div flex>
                 <h2><md-icon class="material-icons">add_location</md-icon>Agregar marcador desde Google Places</h2>
                  <table data-md-table> 
					<thead md-head>
                      <tr md-row>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>&nbsp;</th>
                        <th md-column>Action</th>
                        <th md-column>&nbsp;</th><!--espacio en blanco-->
                      </tr>
                    </thead>
                    <tbody md-body>
						
                      <form name="markerGoogleForm" ng-disabled="true">
                        <tr md-row>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">local_atm</md-icon>Nombre</label>
                              <textarea name="f_mrkr_g_name" class="form-control form-control-estilo2" ng-model="marker_g.name" ng-disabled="form_g"></textarea>
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">place</md-icon>Locación</label>
                              <textarea name="f_mkr_g_vic" class="form-control form-control-estilo2" ng-model="marker_g.vicinity" ng-disabled="form_g"></textarea>
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">local_post_office</md-icon>Descripción</label>
                              <textarea name="f_mkr_g_desc" class="form-control form-control-estilo2" ng-model="marker_g.description" ng-disabled="form_g"></textarea>
                            </md-input-container>
                          </td>       
						  <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">rate_review</md-icon>Ranking</label>
                              <input name="f_mrkr_g_rate" class="form-control form-control-estilo2" ng-model="marker_g.rating" ng-disabled="form_g">
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">public</md-icon>Latitud</label>
                              <input name="f_mkr_g_lat" class="form-control form-control-estilo2"  ng-model="marker_g.lat" ng-disabled="form_g">
                            </md-input-container>
                          </td>
                          <td md-cell>
                            <md-input-container class="md-block" flex>
                              <label><md-icon class="material-icons">public</md-icon>Longitud</label>
                              <input name="f_marker_g_lng" class="form-control form-control-estilo2" ng-model="marker_g.lng" ng-disabled="form_g">
                            </md-input-container>
                          </td>
                          <td md-cell><md-button class="md-raised md-primary" ng-click="addMarkerG()" ng-disabled="form_g">Agregar marcador</md-button></td>
                          <td md-cell><md-button class="md-raised" ng-click="deselectMaker_g()">Limpiar</md-button></td> 
                        </tr>
                      </form>                        
                    </tbody> 
					  
                  </table>
                  
                </div>            
              </div>
              
            </div>
            
          </md-content>
          </div>
        </md-tab>
        <md-tab label="ReadMe">
          <p>Integer turpis erat, porttitor vitae mi faucibus, laoreet interdum tellus. Curabitur posuere molestie dictum. Morbi eget congue risus, quis rhoncus quam. Suspendisse vitae hendrerit erat, at posuere mi. Cras eu fermentum nunc. Sed id ante eu orci commodo volutpat non ac est. Praesent ligula diam, congue eu enim scelerisque, finibus commodo lectus.</p>
        </md-tab>
      </md-tabs>
     
    </md-content>
    
     
    
    <!--Scripts-->
      <!--JQuery-->
      <sript src="/node_modules/jquery/dist/jquery.min.js"></sript>
      <!--AngularJS-->
      <script src="/modules/angular/angular.min.js"></script> 
      <!--Angular-Animate-->
      <script src="/modules/angular-animate/angular-animate.js"></script> 
      <!--Angular-Aria-->
      <script src="/modules/angular-aria/angular-aria.js"></script> 
      <!--Angular-Messages-->
      <script src="/modules/angular-messages/angular-messages.min.js"></script>
      <!--Angular-Material-->
      <script src="/modules/angular-material/angular-material.min.js"></script>
      <!--Google Maps-->

       <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCVfj-6OoRJFojwfhDdbGGrqDa9g4BU4fs&libraries=places"></script>

<!--      <script src="https://maps.google.com/maps/api/js"></script>-->
      <!--Directivas ng-maps-->
      <script src="/modules/ngmap/build/scripts/ng-map.min.js"></script>

      <!--Controlador Propio-->
      <script src="controllers/indexController.js"></script>

  </body>

</html>